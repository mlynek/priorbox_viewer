{"version":3,"file":"viewer.min.js","sources":["../viewer.js"],"names":["window","ImageViewer","canvasId","imageUrl","options","isState","checkState","state","states","importPolygon","vertexArray","length","Polygon","initialVertex","createVertex","x","y","current","next","i","equals","exportPolygon","polygon","exportedPolygon","vertices","getVertices","push","position","onImageLoad","scale","canvas","height","self","image","width","centre","dirty","render","ctx","context","clearRect","save","translateX","translateY","translate","drawImage","restore","solutionVisible","solution","drawPolygon","annotationsVisible","annotations","forEach","annotation","color","solutionEditable","annotationsEditable","activePolygon","getLength","isClosed","lastVertexPosition","getLastVertex","mousePosition","convertToImagePosition","mouseLastPos","drawLine","defaultLineWidth","answerVisible","answer","drawAnswer","drawButtons","stopRendering","requestAnimationFrame","from","to","lineColor","lineWidth","strokeStyle","translation","convertToCanvasTranslation","relativeToPosition","drawPos","beginPath","moveTo","lineTo","stroke","padding","radius","gap","buttons","draw","colorButtons","currentTooltip","globalAlpha","fontSize","font","textSize","measureText","rectWidth","rectHeight","rectX","rectY","textX","textY","fillStyle","drawRoundRectangle","fillText","fill","quadraticCurveTo","closePath","canvasPosition","visiblePart","canvasImage","imagePosition","newVertex","Vertex","onClick","deleteVertex","onSolutionChange","exportSolution","cleanupAnnotations","onAnnotationChange","exportAnnotations","isInitialVertex","close","DEFAULT","onMouseDown","activeMoveElement","leftMouseButtonDown","this","handleWidth","drawVertexHandle","vertex","focusUIElement","rect","polygonInstance","fillColor","strokeColor","handle","isLeft","p0","p1","p2","addNewAnnotation","newAnnotation","annotationColors","filter","getAnswerColor","canvasAnswer","isWithinBounds","shapeScale","transalation","shadowColor","shadowBlur","drawAwesomeIcon","getUIElements","collectedUIElements","concat","map","getUIElement","evt","getBoundingClientRect","pos","clientX","left","clientY","top","activeUIElement","uiElement","button","activeElement","onMouseUp","onMouseClick","clickPos","shiftKey","newVertexPosition","console","log","addVertex","onMouseWheel","event","preventDefault","detail","wheelDelta","zoomOut","zoomIn","onMouseMove","newPos","deltaX","deltaY","oldToolTip","tooltip","Button","icon","drawPosition","drawRadius","alpha","iconColor","enabled","enabledAlpha","alert","createAnnotationColorButton","found","centreX","centreY","size","addEventListener","eventTarget","eventType","listener","events","removeAllEventListeners","_i","_current","_events","slice","removeEventListener","addEventListeners","document","initialize","src","Object","prototype","toString","call","importSolution","importAnnotations","zoomOutButton","zoomInButton","answerEditable","deleteAnswerButton","addAnswerButton","ANSWER_DRAW","defaultButtons","answerButtons","drawPolygonPointEnabled","drawPolygonPointOnClick","POLYGON_DRAW","movePolygonPointEnabled","movePolygonPointOnClick","POLYGON_MOVE","deletePolygonPointEnabled","deletePolygonPointOnClick","POLYGON_POINT_DELETE","drawSolutionPointButton","moveSolutionButton","deleteSolutionPointButton","deleteSolutionButton","solutionButtons","addNewAnnotationButton","drawAnnotationPointButton","moveAnnotationButton","deleteAnnotationPointButton","deleteAnnotationButton","deletePosition","splice","annotationButtons","mode","getElementById","getContext","scaleStep","ANNOTATION_DISPLAY","Image","importedSolution","importedAnnotations","importAnnotation","other","last","deleted","currentVertex","indexOf","count","wn","p","dx","Math","abs","dy","isEnabled","arc","PI","globalCompositeOperation","dispose","refresh"],"mappings":"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"}